{% extends "courses/base.html" %}

{% block head_title %}Semesters | {% endblock %}
{% block head %}{% endblock %}

{% block content_first %}{% endblock %}
{% block heading %}<i class="fa fa-calendar-o pull-right"></i>Semesters
  {% if request.user.is_staff %}
    <a class="btn btn-primary" href="{% url 'courses:semester_create' %}" role="button">New</a>
  {% endif %}
{% endblock %}

{% block content %}

<a id="end-semester" href="{% url 'courses:end_active_semester' %}" class="btn btn-danger pull-right"
title="This will permanently record all student XP for the semester. Which means changing or deleting quests, submissions, or badges will no longer affect their marks for that semester.  It will also archive all announcements.">Close active semester</a>
<h3>Current Active Semester: {{ config.active_semester }}</h3>

<p>When students join a course it will be connected to the active semester.  
  The first and last day of the semester are only relevant if you are using the <i>mark malculations</i> page. 
  (See <a href="{% url 'config:site_config_update_own' %}">Site Configuration</a>)</p>

<table class="table table-striped">
  <tr>
    <th>First Day</th>
    <th>Last Day</th>
    <th>Closed</th>
    <th>Active</th>
    <th>Action</th>
  </tr>
  {% for object in object_list %}
  <tr>
    <td>{{ object.first_day }}</td>
    <td>{{ object.last_day }}</td>
    <td>{{ object.closed }}</td>
    <td>{% if object == config.active_semester %}True{% else %}False{% endif %}</td>
    <td>
      <a class="btn btn-warning" href="{% url 'courses:semester_update' object.id %}" role="button" title="Edit this semester">
        <i class="fa fa-edit"></i>
      </a>
    </td>
  </tr>
  {% endfor %}
</table>

<hr>
{% endblock %}

{% block js %}

<script>
  $('body').on('click', '#end-semester', function(e) {
      if(!confirm("Are you sure?")) {
          e.preventDefault();
          return;
      }
  })
</script>
{% endblock %}
