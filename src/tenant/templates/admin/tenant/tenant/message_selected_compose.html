<!-- tenant/templates/admin/tenant/tenant/message_selected_compose.html -->

<!-- This block will be included to django admin basic template -->
{% extends "admin/base_site.html" %}
{% load i18n l10n admin_urls static %}

{% block extrahead %}
    {{ block.super }}
    {{ media }}
    <script src="{% static 'admin/js/cancel.js' %}" async></script>
{% endblock %}

{% block breadcrumbs %}
    <ul class="grp-horizontal-list">
        <li><a href="{% url 'admin:index' %}">{% trans "Home" %}</a></li>
        <li><a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a></li>
        <li><a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a></li>
        <li>{% trans 'Send email to multiple users' %}</li>
    </ul>
{% endblock %}
{% block content-class %}{% endblock %}

{% block content %}
    <form action="" method="post" novalidate>{% csrf_token %}
        {% if is_popup %}<input type="hidden" name="_popup" value="1" />{% endif %}
        {% if adminform.errors %}
            <p class="errornote">{% if adminform.errors|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}</p>
            <ul class="errorlist">{% for error in adminform.non_field_errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}

        <!--  The code of the form with all input fields will be automatically generated by Django  -->
        <fieldset class="module grp-module">
            <div class="form-row grp-row grp-cells-1{% if adminform.form.subject.errors %} grp-errors{% endif %} subject">
                <div class="field-box l-2c-fluid l-d-4">
                    <div class="c-1"><label for="id_subject" class="required">{% trans 'Subject' %}</label></div>
                    <div class="c-2">
                        {{ adminform.form.subject }}
                        {{ adminform.form.subject.errors }}
                        {% if adminform.form.subject.help_text %}
                            <p class="grp-help">{{ adminform.form.subject.help_text|safe }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <!--  Show the list of selected objects on the previous step  -->
            {% if DEFAULT_FROM_EMAIL %}
                <div class="form-row grp-row grp-cells-1 to">
                    <div class="field-box l-2c-fluid l-d-4">
                        <div class="c-1"><label for="id_to">{% trans 'To' %}</label></div>
                        <div class="c-2">
                            <ul>{{ DEFAULT_FROM_EMAIL }}</ul>
                        </div>
                    </div>
                </div>
            {% endif %}
            <div class="form-row grp-row grp-cells-1 recipient_list">
                <div class="field-box l-2c-fluid l-d-4">
                    <div class="c-1"><label for="id_recipient_list" class="required">{% trans 'Bcc' %}</label></div>
                    <div class="c-2">
                        <ul>{{ recipient_list|unordered_list }}</ul>
                        <p class="grp-help">{% trans 'Email message will be sent to these users' %}</p>
                    </div>
                </div>
            </div>
            <div class="form-row grp-row grp-cells-1{% if adminform.form.message.errors %} grp-errors{% endif %} message">
                <div class="field-box l-2c-fluid l-d-4">
                    <div class="c-1"><label for="id_message" class="required">{% trans 'Message' %}</label></div>
                    <div class="c-2">
                        {{ adminform.form.message }}
                        {{ adminform.form.message.errors }}
                        {% if adminform.form.message.help_text %}
                            <p class="grp-help">{{ adminform.form.message.help_text|safe }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </fieldset>

        <div id="submit" class="grp-module grp-submit-row grp-fixed-footer">
            {% for obj in queryset %}
                <input type="hidden" name="{{ action_checkbox_name }}" value="{{ obj.pk|unlocalize }}">
            {% endfor %}
            <input type="hidden" name="action" value="message_selected" />
            <input type="hidden" name="post" value="yes">
            <ul>
                <li class="grp-float-left"><a href="." class="grp-button grp-cancel-link">{% trans "No, take me back" %}</a></li>
                <li><input type="submit" value="{% trans "Send message" %}" class="grp-button grp-default" /></li>
            </ul>
        </div>
    </form>
{% endblock %}
