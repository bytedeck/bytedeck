{% extends "quest_manager/base.html" %}
{% load crispy_forms_tags %}

{% block head_title %}Campaigns | {% endblock %}

{% block heading %}<i class="fa fa-compass pull-right"></i>{% block heading_inner %} {{ object.title }} Campaign{% endblock %}{% endblock %}

{% block content %}
    {% if request.user.is_staff %}
        <div class="pull-right">
            <a class="btn btn-warning" href="{% url 'quests:category_update' object.id %}" role="button"
                title = "Edit this campaign" >
            <i class="fa fa-edit"></i>
            </a>
            {% if object.quest_count != 0 %}
            <span title="Unpublish or delete all quests before deleting campaign">
                <a class="btn btn-danger disabled"
                    href="#"
                    tabindex="-1"
                    aria-disabled="true"
                    role="button"
                    title = "Unpublish or delete all quests before deleting campaign" >
                <i class="fa fa-trash-o"></i>
                </a>
            </span>
            {% else %}
            <a class="btn btn-danger"
                href="{% url 'quests:category_delete' object.id %}" role="button"
                title = "Delete this campaign" >
            <i class="fa fa-trash-o"></i>
            </a>
            {% endif %}
        </div>
    {% endif %}
    {% if object.active or request.user.is_staff %}
        {% with object as category %}
            {% include "quest_manager/category_detail_content.html" %}
        {% endwith %}
    {% else %}
        <p>The campaign you're trying to reach is currently unavailable. Please contact your teacher if this comes as a surprise.</p>
    {% endif %}
{% endblock %}

{% block js%}
  {{ block.super }}
{% endblock %}
